# Vue 3 + TypeScript ç»„ä»¶å¼€å‘è§„èŒƒ

åŸºäºå‡çº§åçš„ `demo-button` ç»„ä»¶åˆ†æçš„æ ‡å‡†åŒ–ç»„ä»¶å¼€å‘æŒ‡å—ï¼Œæ‰€æœ‰æ–°ç»„ä»¶å¿…é¡»éµå¾ªæ­¤ç°ä»£åŒ–è§„èŒƒã€‚

## 1. æ ‡å‡†ç›®å½•ç»“æ„

æ¯ä¸ªç»„ä»¶å¿…é¡»æŒ‰ç…§ä»¥ä¸‹ç»“æ„ç»„ç»‡ï¼š

```
src/
â””â”€â”€ component-name/              # ç»„ä»¶æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨ kebab-case
    â”œâ”€â”€ index.vue                # ä¸»ç»„ä»¶æ–‡ä»¶
    â”œâ”€â”€ README.md                # ç»„ä»¶æ–‡æ¡£
    â”œâ”€â”€ demo/
    â”‚   â””â”€â”€ index.vue            # æ¼”ç¤ºæ–‡ä»¶
    â””â”€â”€ test/
        â”œâ”€â”€ index.spec.ts        # TypeScript æµ‹è¯•æ–‡ä»¶
        â””â”€â”€ __snapshots__/       # Jest å¿«ç…§ç›®å½•
            â””â”€â”€ index.spec.ts.snap
```

## 2. ä¸»ç»„ä»¶æ–‡ä»¶è§„èŒƒ (index.vue)

```vue
<template>
  <!-- æ ¹å…ƒç´ ä½¿ç”¨ç»„ä»¶åå¯¹åº”çš„ CSS ç±»ï¼Œæ”¯æŒåŠ¨æ€æ ·å¼ç»‘å®š -->
  <button class="demo-button" :style="buttonStyle">
    <slot />
  </button>
</template>

<script setup lang="ts">
import { computed } from 'vue';

// TypeScript æ¥å£å®šä¹‰ Props ç±»å‹
interface Props {
  color?: string;
  type?: string;
  size?: 'small' | 'medium' | 'large';
  disabled?: boolean;
}

// ä½¿ç”¨ defineProps å’Œ withDefaults å®šä¹‰ Props
const props = withDefaults(defineProps<Props>(), {
  type: 'primary',
  size: 'medium',
  disabled: false,
});

// ä½¿ç”¨è®¡ç®—å±æ€§å¤„ç†åŠ¨æ€æ ·å¼
const buttonStyle = computed(() => {
  const style: Record<string, string> = {};
  
  if (props.color) {
    style.backgroundColor = props.color;
  }
  
  return style;
});

// å¦‚æœéœ€è¦æš´éœ²æ–¹æ³•ç»™çˆ¶ç»„ä»¶ï¼Œä½¿ç”¨ defineExpose
// defineExpose({
//   someMethod: () => {
//     // æ–¹æ³•å®ç°
//   }
// });
</script>

<style lang="scss">
// å¿…é¡»ä½¿ç”¨ SCSSï¼Œç±»åä½¿ç”¨ kebab-case
.demo-button {
  min-width: 120px;
  color: #fff;
  font-size: 16px;
  line-height: 36px;
  background-color: #f44;
  border: none;
  border-radius: 30px;
  cursor: pointer;
  transition: all 0.3s ease;
  
  // äº¤äº’çŠ¶æ€
  &:hover {
    opacity: 0.8;
  }
  
  &:active {
    transform: scale(0.98);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  
  // ä¿®é¥°ç¬¦ä½¿ç”¨ BEM é£æ ¼
  &--large {
    font-size: 18px;
    line-height: 40px;
  }
  
  &--small {
    font-size: 14px;
    line-height: 32px;
  }
}
</style>
```

## 3. æ¼”ç¤ºæ–‡ä»¶è§„èŒƒ (demo/index.vue)

```vue
<template>
  <!-- æ¯ä¸ªåŠŸèƒ½ç”¨ demo-block åŒ…è£… -->
  <demo-block title="åŸºç¡€ç”¨æ³•">
    <demo-button type="primary" style="margin-left: 15px">æŒ‰é’®</demo-button>
  </demo-block>

  <demo-block title="è‡ªå®šä¹‰é¢œè‰²">
    <demo-button color="#03a9f4" style="margin-left: 15px">æŒ‰é’®</demo-button>
  </demo-block>

  <demo-block title="ä¸åŒç±»å‹">
    <demo-button type="primary" style="margin-left: 15px">ä¸»è¦æŒ‰é’®</demo-button>
    <demo-button type="secondary" style="margin-left: 15px">æ¬¡è¦æŒ‰é’®</demo-button>
  </demo-block>

  <demo-block title="è‡ªå®šä¹‰å†…å®¹">
    <demo-button color="#ff6b35" style="margin-left: 15px">
      ğŸš€ ç«ç®­æŒ‰é’®
    </demo-button>
    <demo-button color="#4ecdc4" style="margin-left: 15px">
      âœ¨ ç‰¹æ•ˆæŒ‰é’®
    </demo-button>
  </demo-block>

  <demo-block title="å“åº”å¼æ¼”ç¤º" v-if="showAdvanced">
    <demo-button :color="dynamicColor" @click="changeColor">
      åŠ¨æ€é¢œè‰²æŒ‰é’®
    </demo-button>
  </demo-block>
</template>

<script setup lang="ts">
import { ref } from 'vue';
import DemoButton from '../index.vue';

// æ¼”ç¤ºé¡µé¢å¯ä»¥åŒ…å«å“åº”å¼é€»è¾‘
const showAdvanced = ref(true);
const dynamicColor = ref('#007bff');

const changeColor = () => {
  const colors = ['#007bff', '#28a745', '#dc3545', '#ffc107'];
  const currentIndex = colors.indexOf(dynamicColor.value);
  dynamicColor.value = colors[(currentIndex + 1) % colors.length];
};
</script>

<style lang="scss" scoped>
// æ¼”ç¤ºé¡µé¢çš„è‡ªå®šä¹‰æ ·å¼
.demo-block {
  margin-bottom: 20px;
  
  &:last-child {
    margin-bottom: 0;
  }
}
</style>
```

**æ¼”ç¤ºæ–‡ä»¶è¦æ±‚ï¼š**
- ä½¿ç”¨ TypeScript setup è¯­æ³•
- å±•ç¤ºä¸»è¦ä½¿ç”¨åœºæ™¯å’Œç‰¹æ®Šç”¨æ³•
- æ¯ä¸ªç¤ºä¾‹ç”¨ `demo-block` åŒ…è£…
- æä¾›æœ‰æ„ä¹‰çš„æ ‡é¢˜
- å¯ä»¥åŒ…å«å“åº”å¼é€»è¾‘æ¼”ç¤º

## 4. æ–‡æ¡£è§„èŒƒ (README.md)

```markdown
# ComponentName ç»„ä»¶ä¸­æ–‡å

### ä»‹ç»

ComponentName æ˜¯ä¸€ä¸ªåŸºäº Vue 3 + TypeScript å¼€å‘çš„ç°ä»£åŒ–ç»„ä»¶ï¼Œæ”¯æŒ...

### å¼•å…¥

```ts
// æ–¹å¼ä¸€ï¼šæŒ‰éœ€å¼•å…¥ï¼ˆæ¨èï¼‰
import { ComponentName } from 'cool-components';

// æ–¹å¼äºŒï¼šå®Œæ•´å¼•å…¥
import CoolComponents from 'cool-components';
import { createApp } from 'vue';

const app = createApp();
app.use(CoolComponents);
```

### TypeScript æ”¯æŒ

```ts
// åœ¨ TypeScript é¡¹ç›®ä¸­ä½¿ç”¨
import { ComponentName } from 'cool-components';
import type { ComponentProps } from 'vue-component-type-helpers';

// è·å–ç»„ä»¶å±æ€§ç±»å‹
type ComponentNameProps = ComponentProps<typeof ComponentName>;
```

## ä»£ç æ¼”ç¤º

### åŸºç¡€ç”¨æ³•

```vue
<template>
  <component-name type="primary">ä¸»è¦æŒ‰é’®</component-name>
</template>

<script setup lang="ts">
import { ComponentName } from 'cool-components';
</script>
```

### äº‹ä»¶å¤„ç†

```vue
<template>
  <component-name @click="handleClick">ç‚¹å‡»æˆ‘</component-name>
</template>

<script setup lang="ts">
import { ComponentName } from 'cool-components';

const handleClick = (event: MouseEvent) => {
  console.log('ç»„ä»¶è¢«ç‚¹å‡»äº†ï¼', event);
};
</script>
```

## API

### Props

| å‚æ•° | è¯´æ˜ | ç±»å‹ | é»˜è®¤å€¼ | ç‰ˆæœ¬ |
| --- | --- | --- | --- | --- |
| type | ç»„ä»¶ç±»å‹ | _string_ | `primary` | - |
| color `1.0.0` | è‡ªå®šä¹‰é¢œè‰² | _string_ | - | 1.0.0 |

### Events

| äº‹ä»¶å | è¯´æ˜ | å›è°ƒå‚æ•° |
| --- | --- | --- |
| click | ç‚¹å‡»æ—¶è§¦å‘ | _event: MouseEvent_ |

### Slots

| åç§° | è¯´æ˜ | å‚æ•° |
| --- | --- | --- |
| default | é»˜è®¤æ’æ§½ | - |

### æ ·å¼å˜é‡

ç»„ä»¶æä¾›äº†ä»¥ä¸‹ CSS å˜é‡ï¼Œå¯ç”¨äºè‡ªå®šä¹‰æ ·å¼ï¼š

| åç§° | é»˜è®¤å€¼ | æè¿° |
| --- | --- | --- |
| --component-name-primary-color | #f44 | ä¸»è‰²è°ƒ |
| --component-name-border-radius | 30px | åœ†è§’å¤§å° |

### ç±»å‹å®šä¹‰

```ts
interface ComponentNameProps {
  type?: string;
  color?: string;
}

interface ComponentNameEmits {
  click: (event: MouseEvent) => void;
}
```
```

## 5. æµ‹è¯•è§„èŒƒ (test/index.spec.ts)

```typescript
// @ts-nocheck (å¦‚æœéœ€è¦é¿å…ç±»å‹æ£€æŸ¥)
import { mount } from '@vue/test-utils';
import ComponentName from '../index.vue';

// åŸºç¡€æ¸²æŸ“æµ‹è¯•
test('render component name', () => {
  const wrapper = mount(ComponentName);
  expect(wrapper.html()).toMatchSnapshot();
});

// å±æ€§æµ‹è¯•
test('render component with props', () => {
  const wrapper = mount(ComponentName, {
    props: {
      type: 'primary',
      color: '#03a9f4'
    },
    slots: {
      default: 'æµ‹è¯•å†…å®¹'
    }
  });
  
  expect(wrapper.find('.component-name').exists()).toBe(true);
  expect(wrapper.text()).toBe('æµ‹è¯•å†…å®¹');
  
  // æ£€æŸ¥æ ·å¼æ˜¯å¦æ­£ç¡®åº”ç”¨
  const element = wrapper.element as HTMLElement;
  expect(element.style.backgroundColor).toBeTruthy();
});

// é»˜è®¤å±æ€§æµ‹è¯•
test('render component with default props', () => {
  const wrapper = mount(ComponentName, {
    slots: {
      default: 'é»˜è®¤å†…å®¹'
    }
  });
  
  expect(wrapper.find('.component-name').exists()).toBe(true);
  expect(wrapper.text()).toBe('é»˜è®¤å†…å®¹');
});

// äº‹ä»¶æµ‹è¯•
test('component click event', async () => {
  const wrapper = mount(ComponentName, {
    slots: {
      default: 'ç‚¹å‡»æµ‹è¯•'
    }
  });

  const element = wrapper.find('.component-name');
  expect(element.exists()).toBe(true);
  
  // æ¨¡æ‹Ÿäº‹ä»¶
  await element.trigger('click');
  
  // éªŒè¯äº‹ä»¶ç»“æœ
  expect(element.exists()).toBe(true);
});

// è¾¹ç•Œæƒ…å†µæµ‹è¯•
test('component with empty content', () => {
  const wrapper = mount(ComponentName);
  
  expect(wrapper.find('.component-name').exists()).toBe(true);
  expect(wrapper.text()).toBe('');
});
```

## 6. å‘½åè§„èŒƒ

| ç±»å‹ | æ ¼å¼ | ç¤ºä¾‹ |
|------|------|------|
| ç»„ä»¶åï¼ˆä»£ç ä¸­ï¼‰ | PascalCase | `DemoButton` |
| æ–‡ä»¶å¤¹å | kebab-case | `demo-button` |
| CSS ç±»å | kebab-case | `.demo-button` |
| æµ‹è¯•æ–‡ä»¶å | kebab-case.ts | `index.spec.ts` |
| TypeScript æ¥å£ | PascalCase | `DemoButtonProps` |

## 7. TypeScript ç±»å‹å®šä¹‰è§„èŒƒ

```typescript
// Props æ¥å£å®šä¹‰
interface ComponentProps {
  // å¯é€‰å±æ€§ä½¿ç”¨ ?
  color?: string;
  type?: string;
  // é™åˆ¶å€¼ç±»å‹
  size?: 'small' | 'medium' | 'large';
  // å¸ƒå°”ç±»å‹
  disabled?: boolean;
  // æ•°ç»„ç±»å‹
  options?: string[];
  // å¯¹è±¡ç±»å‹
  config?: Record<string, any>;
}

// Events æ¥å£å®šä¹‰
interface ComponentEmits {
  click: (event: MouseEvent) => void;
  change: (value: string) => void;
}

// å¦‚æœç»„ä»¶æœ‰å¤æ‚çš„å†…éƒ¨çŠ¶æ€
interface ComponentState {
  loading: boolean;
  error: string | null;
}
```

## 8. æ ·å¼è§„èŒƒï¼ˆå¢å¼ºç‰ˆï¼‰

```scss
// ä½¿ç”¨ CSS å˜é‡æ”¯æŒä¸»é¢˜å®šåˆ¶
.demo-button {
  // CSS å˜é‡å®šä¹‰
  --demo-button-primary-color: #f44;
  
  // åŸºç¡€æ ·å¼
  min-width: 120px;
  color: #fff;
  font-size: 16px;
  background-color: var(--demo-button-primary-color);
  border: none;
  border-radius: 30px;
  cursor: pointer;
  transition: all 0.3s ease;
  
  // çŠ¶æ€æ ·å¼
  &:hover {
    opacity: 0.8;
  }
  
  &:active {
    transform: scale(0.98);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  
  // BEM ä¿®é¥°ç¬¦
  &--large {
    font-size: 18px;
  }
  
  &--small {
    font-size: 14px;
  }
  
  // å“åº”å¼è®¾è®¡
  @media (max-width: 768px) {
    min-width: 100px;
    font-size: 14px;
  }
}
```

## 9. ç°ä»£åŒ–å¼€å‘æµç¨‹

1. **åˆ›å»ºç›®å½•ç»“æ„**ï¼šä¸¥æ ¼æŒ‰ç…§ TypeScript æ ‡å‡†ç»“æ„
2. **å®šä¹‰ç±»å‹æ¥å£**ï¼šå…ˆå®šä¹‰ Props å’Œ Emits æ¥å£
3. **å®ç°ä¸»ç»„ä»¶**ï¼šä½¿ç”¨ `<script setup lang="ts">` è¯­æ³•
4. **ç¼–å†™æ¼”ç¤º**ï¼šåœ¨ `demo/index.vue` å±•ç¤ºå®Œæ•´ç”¨æ³•
5. **å®Œå–„æ–‡æ¡£**ï¼šç¼–å†™åŒ…å« TypeScript æ”¯æŒçš„ `README.md`
6. **æ·»åŠ æµ‹è¯•**ï¼šç¼–å†™ TypeScript æµ‹è¯•æ–‡ä»¶
7. **æ ·å¼è°ƒè¯•**ï¼šç¡®ä¿ CSS å˜é‡å’Œå“åº”å¼æ”¯æŒ
8. **ç±»å‹æ£€æŸ¥**ï¼šç¡®ä¿ç»„ä»¶é€šè¿‡ TypeScript ç±»å‹æ£€æŸ¥

## 10. ç°ä»£åŒ–è´¨é‡æ£€æŸ¥æ¸…å•

- [ ] ä½¿ç”¨ `<script setup lang="ts">` è¯­æ³•
- [ ] å®šä¹‰å®Œæ•´çš„ TypeScript æ¥å£
- [ ] ä½¿ç”¨ `defineProps` å’Œ `withDefaults`
- [ ] CSS ç±»åä¸æ–‡ä»¶å¤¹åä¸€è‡´
- [ ] æ”¯æŒ CSS å˜é‡ä¸»é¢˜å®šåˆ¶
- [ ] åŒ…å«äº¤äº’çŠ¶æ€æ ·å¼ï¼ˆhoverã€activeã€disabledï¼‰
- [ ] æ–‡æ¡£åŒ…å« TypeScript æ”¯æŒè¯´æ˜
- [ ] æ¼”ç¤ºæ–‡ä»¶å±•ç¤ºå®Œæ•´åŠŸèƒ½
- [ ] æµ‹è¯•æ–‡ä»¶ä½¿ç”¨ `.ts` æ‰©å±•å
- [ ] åŒ…å«è¾¹ç•Œæƒ…å†µæµ‹è¯•
- [ ] æ ·å¼æ”¯æŒå“åº”å¼è®¾è®¡
- [ ] é€šè¿‡ TypeScript ç±»å‹æ£€æŸ¥

## 11. ç°ä»£åŒ–æœ€ä½³å®è·µ

### âœ… æ¨èå†™æ³•

```vue
<!-- ä¸»ç»„ä»¶æ–‡ä»¶ -->
<template>
  <div class="my-component" :class="componentClass" :style="componentStyle">
    <slot />
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue';

interface Props {
  variant?: 'primary' | 'secondary' | 'danger';
  size?: 'small' | 'medium' | 'large';
  disabled?: boolean;
}

const props = withDefaults(defineProps<Props>(), {
  variant: 'primary',
  size: 'medium',
  disabled: false,
});

// è®¡ç®—å±æ€§å¤„ç†å¤æ‚é€»è¾‘
const componentClass = computed(() => ({
  [`my-component--${props.variant}`]: true,
  [`my-component--${props.size}`]: true,
  'my-component--disabled': props.disabled,
}));

const componentStyle = computed(() => {
  // åŠ¨æ€æ ·å¼é€»è¾‘
  return {};
});
</script>

<style lang="scss">
.my-component {
  // CSS å˜é‡
  --component-primary-color: #007bff;
  
  // åŸºç¡€æ ·å¼
  padding: 12px 24px;
  border-radius: 4px;
  transition: all 0.2s ease;
  
  // ä¿®é¥°ç¬¦
  &--primary {
    background-color: var(--component-primary-color);
  }
  
  &--disabled {
    opacity: 0.5;
    pointer-events: none;
  }
}
</style>
```

### âŒ ç¦æ­¢å†™æ³•

```vue
<!-- ä¸è¦ä½¿ç”¨ Options API -->
<script>
export default {
  name: 'MyComponent',
  props: {
    variant: String,  // ç¼ºå°‘ç±»å‹é™åˆ¶
  },
  data() {
    return {}; // ä¸è¦ä½¿ç”¨ data
  },
  methods: {} // ä¸è¦ä½¿ç”¨ methods
};
</script>

<!-- ä¸è¦ä½¿ç”¨å†…è”æ ·å¼è€Œä¸æ˜¯è®¡ç®—å±æ€§ -->
<template>
  <div :style="{ color: props.color }">
    <!-- åº”è¯¥ä½¿ç”¨è®¡ç®—å±æ€§ -->
  </div>
</template>

<!-- ä¸è¦ä½¿ç”¨é©¼å³°å‘½åçš„ CSS ç±» -->
<style>
.MyComponent { } /* é”™è¯¯ï¼šåº”è¯¥ä½¿ç”¨ .my-component */
</style>
```

## 12. æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ä½¿ç”¨ `computed` è€Œä¸æ˜¯ `watch`**ï¼šå¯¹äºè¡ç”ŸçŠ¶æ€
2. **åˆç†ä½¿ç”¨ `v-memo`**ï¼šå¯¹äºå¤æ‚çš„åˆ—è¡¨æ¸²æŸ“
3. **CSS å˜é‡**ï¼šæ”¯æŒä¸»é¢˜åˆ‡æ¢å’Œè¿è¡Œæ—¶æ ·å¼ä¿®æ”¹
4. **æ‡’åŠ è½½**ï¼šå¯¹äºå¤§å‹ç»„ä»¶ä½¿ç”¨å¼‚æ­¥ç»„ä»¶
5. **ç±»å‹æ”¶çª„**ï¼šä½¿ç”¨å…·ä½“çš„è”åˆç±»å‹è€Œä¸æ˜¯ `string`

è¿™å¥—è§„èŒƒç¡®ä¿æ‰€æœ‰ç»„ä»¶éƒ½ç¬¦åˆ Vue 3 + TypeScript çš„ç°ä»£åŒ–æ ‡å‡†ï¼Œæä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒå’Œä»£ç è´¨é‡ã€‚

};

.demo-button { }            // ä½¿ç”¨ kebab-case
```
